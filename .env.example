# Trachs Environment Configuration
# Copy this file to .env and modify as needed

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# URL of your Traccar server's OsmAnd protocol endpoint
# Default Traccar OsmAnd port is 5055
TRACCAR_URL=http://traccar:5055

# Path to the secrets.json file on the host machine
# This will be mounted into the container
SECRETS_FILE=./src/Auth/secrets.json

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# How often to poll for device locations (in seconds)
# Default: 900 (15 minutes)
POLL_INTERVAL_SECONDS=900

# Timeout for HTTP requests to Traccar (in seconds)
# Default: 60
REQUEST_TIMEOUT_SECONDS=60

# JSON mapping of device names to Traccar device IDs
# Format: {"Device Name in Google": "traccar_device_id", ...}
# Example: {"Pixel 8 Pro": "pixel8pro", "Pebblebee Clip": "clip001"}
# The device names must match exactly what appears in Google Find My Device
DEVICE_MAPPING={}

# If true, auto-generate Traccar device IDs from device names
# when not explicitly mapped. IDs are generated by lowercasing
# the device name and removing non-alphanumeric characters.
# Default: true
AUTO_GENERATE_DEVICE_IDS=true

# Set to "false" for dry-run mode
# In dry-run mode, locations are logged but not sent to Traccar
# Useful for testing your configuration
# Default: true
TRACCAR_ENABLED=true

# Log level: DEBUG, INFO, WARNING, ERROR
# Use DEBUG for troubleshooting
# Default: INFO
LOG_LEVEL=INFO

# =============================================================================
# FILE PERMISSIONS (for NAS systems like TrueNAS, Synology, etc.)
# =============================================================================

# User ID to run the container as
# Set this to match the owner of your secrets.json file
# Find with: ls -n /path/to/secrets.json (look at the third column)
# Default: 1000
PUID=1000

# Group ID to run the container as
# Set this to match the group of your secrets.json file
# Find with: ls -n /path/to/secrets.json (look at the fourth column)
# Default: 1000
PGID=1000

# =============================================================================
# NOTES
# =============================================================================
# 
# secrets.json:
#   This file contains your Google authentication tokens and is required
#   for the service to communicate with Google Find My Device.
#   See the project README for instructions on generating this file.
#
# Device IDs in Traccar:
#   When you set up a device in Traccar, you specify an "Identifier".
#   This identifier must match either:
#   - The value you specify in DEVICE_MAPPING, or
#   - The auto-generated ID (if AUTO_GENERATE_DEVICE_IDS=true)
#   
#   Auto-generated IDs are created by:
#   1. Taking the device name from Google Find My Device
#   2. Lowercasing it
#   3. Removing all non-alphanumeric characters
#   
#   Example: "Pixel 8 Pro" -> "pixel8pro"
#
# Network Configuration:
#   If Traccar is running on the same Docker network, you can use
#   the container name (e.g., http://traccar:5055).
#   If Traccar is running elsewhere, use the full URL.
